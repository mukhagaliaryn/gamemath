<!DOCTYPE html>
{% load static %}
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}GameMath{% endblock title %}</title>
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.css" rel="stylesheet" />
    <link rel="shortcut icon" href="{% static '/images/icon.png' %}" type="image/x-icon">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {},
                fontFamily: {
                    fira: ['Fira Sans Condensed', 'sans-serif'],
                },
            }
        }
    </script>

    <!-- Styles -->
    <style>
        .bubbles {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .bubble {
            position: absolute;
            bottom: -150px;
            width: 64px;
            height: 64px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            animation: bubbleUp 10s infinite ease-in;
        }

        .bubble:nth-child(1) { left: 10%; animation-duration: 8s; animation-delay: 1s; }
        .bubble:nth-child(2) { left: 30%; animation-duration: 10s; animation-delay: 2s; }
        .bubble:nth-child(3) { left: 50%; animation-duration: 12s; animation-delay: 3s; }
        .bubble:nth-child(4) { left: 70%; animation-duration: 9s; animation-delay: 4s; }
        .bubble:nth-child(5) { left: 90%; animation-duration: 11s; animation-delay: 5s; }

        @keyframes bubbleUp {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-110vh) scale(1.5);
                opacity: 0;
            }
        }
    </style>

    <style>
        .quiz-card {
            perspective: 1000px;
            width: 300px;
            height: 400px;
        }

        .quiz-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .quiz-card.flipped .quiz-card-inner {
            transform: rotateY(180deg);
        }

        .quiz-card-front,
        .quiz-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .quiz-card-front {
            background: linear-gradient(135deg, #f39c12, #d35400);
            color: white;
        }

        .quiz-card-back {
            background: white;
            color: black;
            transform: rotateY(180deg);
            padding: 20px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body class="font-fira bg-amber-400 text-white text-base xl:text-lg 2xl:text-xl">
    {% block content %}
    {% endblock content %}


    <!-- Scripts -->
    <script>
        AOS.init();
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const copyButtons = document.querySelectorAll('.copy-btn');
    
            copyButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const url = button.getAttribute('data-url');
                    navigator.clipboard.writeText(window.location.origin + url + 'start/')
                        .then(() => {
                            alert('Сілтеме көшіріліп алынды!');
                        })
                        .catch(err => {
                            console.error('Қателік кетті: ', err);
                        });
                });
            });
        });
    </script>

    <script>
        function playAudio(audioId) {
            const audio = document.getElementById(audioId);
            if (audio) {
                audio.currentTime = 0;
                audio.play();
            }
        }

        function finishTest(audioId) {
            playAudio(audioId);
            alert("Тест завершён!");
        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = document.querySelectorAll('.question');
            const progressBar = document.getElementById('progress-bar');
            const prevButton = document.getElementById('prev-btn');
            const nextButton = document.getElementById('next-btn');
            const finishButton = document.getElementById('finish-btn');
            let currentQuestionIndex = 0;

            questions[currentQuestionIndex].classList.remove('hidden');

            function updateProgress() {
                const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
                progressBar.style.width = `${progress}%`;

                prevButton.disabled = currentQuestionIndex === 0;
                nextButton.disabled = currentQuestionIndex === questions.length - 1;
                finishButton.disabled = currentQuestionIndex !== questions.length - 1;
            }

            nextButton.addEventListener('click', () => {
                if (currentQuestionIndex < questions.length - 1) {
                    questions[currentQuestionIndex].classList.add('hidden');
                    currentQuestionIndex++;
                    questions[currentQuestionIndex].classList.remove('hidden');
                    updateProgress();
                }
            });

            prevButton.addEventListener('click', () => {
                if (currentQuestionIndex > 0) {
                    questions[currentQuestionIndex].classList.add('hidden');
                    currentQuestionIndex--;
                    questions[currentQuestionIndex].classList.remove('hidden');
                    updateProgress();
                }
            });

            updateProgress();
        });

        function playAudio(audioId) {
            const audio = document.getElementById(audioId);
            if (audio) {
                audio.currentTime = 0;
                audio.play();
            }
        }

        function finishTest(audioId) {
            playAudio(audioId);
            alert('Ойын аяқталды! Ары қарай қорытынды нәтиже...');
        }
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cards = document.querySelectorAll('.quiz-card');
            const progressText = document.getElementById('progress');
            const submitButton = document.getElementById('submit-btn');
            let currentCardIndex = 0;

            // Инициализация: показать первую карту
            function showCard(index) {
                cards.forEach((card, i) => {
                    card.classList.toggle('hidden', i !== index);
                });
                progressText.textContent = `${index + 1} / ${cards.length}`;
                submitButton.disabled = index !== cards.length - 1;
            }

            // Переход к следующей карте
            document.getElementById('next-btn').addEventListener('click', () => {
                if (currentCardIndex < cards.length - 1) {
                    currentCardIndex++;
                    showCard(currentCardIndex);
                }
            });

            // Инициализация
            showCard(currentCardIndex);
        });

        function flipCard(cardId) {
            const card = document.getElementById(cardId);
            card.classList.toggle('flipped');
        }
    </script>
        
</body>
</html>